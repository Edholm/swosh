apiVersion: v1
kind: Namespace
metadata:
  name: swosh
  labels:
    name: swosh
---
apiVersion: v1
kind: Service
metadata:
  name: mongodb
  namespace: swosh
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      port: 27017
---
apiVersion: v1
kind: Endpoints
metadata:
  name: mongodb
  namespace: swosh
subsets:
  - addresses:
      - ip: 192.168.1.5
    ports:
      - port: 27017
---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: security-headers
  namespace: swosh
  labels:
    expose: all
spec:
  headers:
    # https://scotthelme.co.uk/a-new-security-header-feature-policy/
    featurePolicy: "accelerometer 'none';ambient-light-sensor 'none';autoplay 'none';camera 'none';encrypted-media 'none';fullscreen 'self';geolocation 'self';gyroscope 'none';magnetometer 'none';microphone 'none';midi 'none';payment 'self';picture-in-picture 'none';speaker 'self';sync-xhr 'none';usb 'none';vibrate 'none';vr 'none';"
